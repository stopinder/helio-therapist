import{r as v,o as w,c,a as p,b as o,w as r,v as d,F as _,d as I,t as g}from"./index-BjjUY51X.js";const y={class:"p-6 bg-white rounded-lg shadow-sm border border-[#d9dce1] max-w-4xl mx-auto"},S={class:"flex items-center gap-2 mb-4"},C={class:"divide-y divide-[#e5e7eb] text-[14px]"},k={class:"flex justify-between items-start"},D={class:"flex-1"},N={class:"font-semibold text-[#2c3e50]"},O={class:"text-slate-600 text-[13px] mb-1"},V=["onUpdate:modelValue"],J=["onUpdate:modelValue"],U=["onClick"],B={__name:"CognitiveInterweave",emits:["save","generate-insight"],setup(E,{emit:x}){const u=x,l=v([]),n=v({target:"",purpose:"",cognition:"",notes:""});function m(){n.value.target.trim()&&(l.value.push({...n.value}),n.value={target:"",purpose:"",cognition:"",notes:""})}function b(s){l.value.splice(s,1)}function f(){var t;const s=(t=JSON.parse(localStorage.getItem("helio_selectedClient")))==null?void 0:t.id;if(!s){alert("No client selected â€” please select a client first.");return}const e=JSON.parse(localStorage.getItem("helio_toolData"))||{};e[`${s}_cognitive`]={interweaves:l.value,savedAt:new Date().toISOString()},localStorage.setItem("helio_toolData",JSON.stringify(e)),alert("Cognitive Interweaves saved for this client!"),window.dispatchEvent(new CustomEvent("tool-saved")),u("save",{tool:"emdr_cognitive",clientId:s,interweaves:l.value})}function h(){var t;const s=(t=JSON.parse(localStorage.getItem("helio_selectedClient")))==null?void 0:t.id;if(!s){alert("No client selected â€” please select a client first.");return}const e={tool:"emdr_cognitive",clientId:s,interweaves:l.value};console.log("ðŸ”„ Forwarding EMDR insight event...",e),u("generate-insight",e)}return w(()=>{var a;const s=(a=JSON.parse(localStorage.getItem("helio_selectedClient")))==null?void 0:a.id,e=JSON.parse(localStorage.getItem("helio_toolData"))||{},t=`${s}_cognitive`;e[t]&&(l.value=e[t].interweaves||[])}),(s,e)=>(p(),c("div",y,[e[4]||(e[4]=o("h2",{class:"text-[18px] font-semibold text-[#2c3e50] mb-3"},"Cognitive Interweave",-1)),e[5]||(e[5]=o("p",{class:"text-[14px] text-slate-600 mb-4"}," Record and reflect on cognitive interweaves used to facilitate EMDR processing. ",-1)),o("div",S,[r(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.target=t),placeholder:"Target or situation",class:"flex-1 border border-[#d9dce1] rounded-md px-3 py-1.5 text-[14px]"},null,512),[[d,n.value.target]]),r(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.purpose=t),placeholder:"Purpose (e.g., blocked processing, insight, compassion)",class:"flex-1 border border-[#d9dce1] rounded-md px-3 py-1.5 text-[14px]"},null,512),[[d,n.value.purpose]]),o("button",{onClick:m,class:"px-3 py-1.5 bg-[#3f4754] text-white rounded-md text-[13px] hover:bg-[#2f3540]"}," Add ")]),o("ul",C,[(p(!0),c(_,null,I(l.value,(t,a)=>(p(),c("li",{key:a,class:"py-3"},[o("div",k,[o("div",D,[o("div",N,g(t.target),1),o("div",O," Purpose: "+g(t.purpose),1),e[2]||(e[2]=o("label",{class:"block text-[12px] text-slate-500 mb-0.5"},"Cognition or Prompt",-1)),r(o("input",{"onUpdate:modelValue":i=>t.cognition=i,placeholder:"Therapist question or reframe",class:"w-full border border-[#d9dce1] rounded-md px-2 py-1 text-[13px] mb-2"},null,8,V),[[d,t.cognition]]),e[3]||(e[3]=o("label",{class:"block text-[12px] text-slate-500 mb-0.5"},"Outcome / Notes",-1)),r(o("textarea",{"onUpdate:modelValue":i=>t.notes=i,placeholder:"Describe client response or session effect...",rows:"2",class:"w-full border border-[#d9dce1] rounded-md px-2 py-1 text-[13px]"},null,8,J),[[d,t.notes]])]),o("button",{onClick:i=>b(a),class:"text-[13px] text-red-600 hover:underline ml-3 mt-1"}," âœ• ",8,U)])]))),128))]),o("div",{class:"flex justify-end gap-3 pt-3"},[o("button",{onClick:h,class:"px-4 py-2 bg-[#2563eb] text-white rounded-md hover:bg-[#1d4ed8] text-[14px]"}," Generate Insight "),o("button",{onClick:f,class:"px-4 py-2 bg-[#3f4754] text-white rounded-md hover:bg-[#2f3540] text-[14px]"}," Save Interweaves ")])]))}};export{B as default};
