import{r as p,o as _,c,a as g,b as e,w as r,v as i,F as y,d as w,t as m}from"./index-BjjUY51X.js";const S={class:"p-6 bg-white rounded-lg shadow-sm border border-[#d9dce1] max-w-4xl mx-auto"},C={class:"flex items-center gap-2 mb-4"},D={class:"divide-y divide-[#e5e7eb] text-[14px]"},k={class:"flex justify-between items-start"},I={class:"flex-1"},N={class:"font-semibold text-[#2c3e50]"},T={class:"text-slate-600 text-[13px] mb-1"},V={class:"grid grid-cols-2 gap-3 mb-2"},U=["onUpdate:modelValue"],O=["onUpdate:modelValue"],E=["onUpdate:modelValue"],J=["onClick"],R={__name:"TargetLog",emits:["save","generate-insight"],setup(M,{emit:x}){const u=x,s=p([]),a=p({memory:"",negativeCognition:"",sud:"",voc:"",notes:""});function v(){a.value.memory.trim()&&(s.value.push({...a.value}),a.value={memory:"",negativeCognition:"",sud:"",voc:"",notes:""})}function b(l){s.value.splice(l,1)}function f(){var o;const l=(o=JSON.parse(localStorage.getItem("helio_selectedClient")))==null?void 0:o.id;if(!l){alert("No client selected â€” please select a client first.");return}const t=JSON.parse(localStorage.getItem("helio_toolData"))||{};t[`${l}_target-log`]={targets:s.value,savedAt:new Date().toISOString()},localStorage.setItem("helio_toolData",JSON.stringify(t)),alert("EMDR Target Log saved for this client!"),window.dispatchEvent(new CustomEvent("tool-saved")),u("save",{tool:"emdr_target-log",clientId:l,targets:s.value})}function h(){var o;const l=(o=JSON.parse(localStorage.getItem("helio_selectedClient")))==null?void 0:o.id;if(!l){alert("No client selected â€” please select a client first.");return}const t={tool:"emdr_target-log",clientId:l,targets:s.value};console.log("ðŸ”„ Forwarding EMDR insight event...",t),u("generate-insight",t)}return _(()=>{var d;const l=(d=JSON.parse(localStorage.getItem("helio_selectedClient")))==null?void 0:d.id,t=JSON.parse(localStorage.getItem("helio_toolData"))||{},o=`${l}_target-log`;t[o]&&(s.value=t[o].targets||[])}),(l,t)=>(g(),c("div",S,[t[4]||(t[4]=e("h2",{class:"text-[18px] font-semibold text-[#2c3e50] mb-3"},"EMDR Target Log",-1)),t[5]||(t[5]=e("p",{class:"text-[14px] text-slate-600 mb-4"}," Track EMDR targets, associated cognitions, and SUD/VOC ratings for each client. ",-1)),e("div",C,[r(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.memory=o),placeholder:"Target memory / event",class:"flex-1 border border-[#d9dce1] rounded-md px-3 py-1.5 text-[14px]"},null,512),[[i,a.value.memory]]),r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.negativeCognition=o),placeholder:"Negative cognition",class:"flex-1 border border-[#d9dce1] rounded-md px-3 py-1.5 text-[14px]"},null,512),[[i,a.value.negativeCognition]]),e("button",{onClick:v,class:"px-3 py-1.5 bg-[#3f4754] text-white rounded-md text-[13px] hover:bg-[#2f3540]"}," Add ")]),e("ul",D,[(g(!0),c(y,null,w(s.value,(o,d)=>(g(),c("li",{key:d,class:"py-3"},[e("div",k,[e("div",I,[e("div",N,m(o.memory),1),e("div",T," Neg. Cognition: "+m(o.negativeCognition),1),e("div",V,[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-[12px] text-slate-500 mb-0.5"},"SUD (0â€“10)",-1)),r(e("input",{"onUpdate:modelValue":n=>o.sud=n,type:"number",min:"0",max:"10",class:"w-full border border-[#d9dce1] rounded-md px-2 py-1 text-[13px]"},null,8,U),[[i,o.sud]])]),e("div",null,[t[3]||(t[3]=e("label",{class:"block text-[12px] text-slate-500 mb-0.5"},"VOC (1â€“7)",-1)),r(e("input",{"onUpdate:modelValue":n=>o.voc=n,type:"number",min:"1",max:"7",class:"w-full border border-[#d9dce1] rounded-md px-2 py-1 text-[13px]"},null,8,O),[[i,o.voc]])])]),r(e("textarea",{"onUpdate:modelValue":n=>o.notes=n,placeholder:"Processing notes or observations...",rows:"2",class:"w-full border border-[#d9dce1] rounded-md px-2 py-1 text-[13px]"},null,8,E),[[i,o.notes]])]),e("button",{onClick:n=>b(d),class:"text-[13px] text-red-600 hover:underline ml-3 mt-1"}," âœ• ",8,J)])]))),128))]),e("div",{class:"flex justify-end gap-3 pt-3"},[e("button",{onClick:h,class:"px-4 py-2 bg-[#2563eb] text-white rounded-md hover:bg-[#1d4ed8] text-[14px]"}," Generate Insight "),e("button",{onClick:f,class:"px-4 py-2 bg-[#3f4754] text-white rounded-md hover:bg-[#2f3540] text-[14px]"}," Save Targets ")])]))}};export{R as default};
